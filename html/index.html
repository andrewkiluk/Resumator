<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<link rel="stylesheet" href="../css/foundation.css" />
	<link rel="stylesheet" href="../css/styles.css" />
	<script src="../js/vendor/modernizr.js"></script>
	
</head>
<body>

	<!-- Title Block -->
	<div class="row">
		<div class="large-12 columns">
			<div class="panel">
				<div class="row">
					<div class="large-6 large-offset-3 columns">
						<div style="text-align: center;">
							<h1>Resumator</h1>
						</div>
					</div>
					<div class="large-3 columns">
						<div style="float:right">
							<a href="#" data-dropdown="drop1" data-options="align:left" class="button">Add a Block</a><br>
							<ul id="drop1" data-dropdown-content class="f-dropdown">
							<li><a href="#" class='kvAddBlock'>Key-Value Type</a></li>
							<li><a href="#" class='lr-kvAddBlock'> Left-Right Key-Value Type</a></li>
							<li><a href="#" class='descriptionAddBlock'>Description Type</a></li>
							<li><a href="#">List Type</a></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		
		</div>
	</div>


	<ul id='blockList'>
		<!-- Contact Info Block -->
		<li class="block row keyValueBlock">
			<div class="large-12 columns">
				<div class="panel">
					<div style="float:right;">
						<img src="../img/x.png" class="closeBox" width="25" height="25" >
					</div>
					<div class="large-4 columns">
						<h3>Contact Info</h3>
					</div>
					<ul class="entryList">
						<li>
							<div class="row">	
								<div class="large-8 large-offset-2 columns">
									<div class="large-6 columns" >
										<input name="input_" + blockIndex + "_" + blockArray[blockIndex].size + '_0' placeholder="Key" type="text" />
									</div>
									<div class="large-6 columns">
										<input name="input_" + blockIndex + "_" + blockArray[blockIndex].size + '_1' placeholder="Value" type="text" />
									</div>
								</div>
								<div class="large-2 columns" style="padding: .25rem;">
									&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;
									<img src="../img/plus.png" class="kvAddEntry" width="25" height="25" >
								</div>
							</div>
						</li>
					</ul>
				</div>
			</div>
		</li>


		<!-- Education Block -->
		<li class="block row lr-keyValueBlock">
			<div class="large-12 columns">
				<div class="panel">
					<div style="float:right;">
						<img src="../img/x.png" class="closeBox" width="25" height="25" >
					</div>
					<div class="large-4 columns">
						<h3>Education Info</h3>
					</div>
					<ul class="entryList">
						<li>
							<div class="row">	
								<div class="large-8 large-offset-2 columns">
									<div class="large-6 columns" >
										<input name="input_" + blockIndex + "_" + blockArray[blockIndex].size + '_0' placeholder="Key" type="text" />
									</div>
									<div class="large-6 columns">
										<input name="input_" + blockIndex + "_" + blockArray[blockIndex].size + '_1' placeholder="Value" type="text" />
									</div>
								</div>
								<div class="large-2 columns" style="padding: .25rem;">
									&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;
									<img src="../img/plus.png" class="lr-kvAddEntry" width="25" height="25" >
								</div>
							</div>
						</li>
					</ul>
				</div>
			</div>
		</li>


		<!-- Projects Block -->
		<li class="block row descriptionBlock">
			<div class="large-12 columns">
				<div class="panel">
					<div style="float:right;">
						<img src="../img/x.png" class="closeBox" width="25" height="25" >
					</div>
					<div class="large-4 columns">
						<h3>Projects</h3>
					</div>
					<ul class="entryList">
						<li>
							<div class="row">	
								<div class="large-8 large-offset-2 columns">
									<div class="large-6 columns" >
										<input name="input_" + blockIndex + "_" + blockArray[blockIndex].size + '_0' placeholder="Subtitle" type="text" />
									</div>
									<div class="large-6 columns">
										
									</div>
									<div class="large-12 columns">
										<textarea rows="4" name="input_" + blockIndex + "_" + blockArray[blockIndex].size + '_1' placeholder="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi cursus, nisi at consequat consequat, orci risus mattis dolor, sed luctus leo elit nec felis. Ut porttitor elit felis, at tincidunt arcu commodo ac. Sed dictum augue sed auctor pellentesque. Curabitur adipiscing et turpis quis mollis."></textarea>
									</div>
								</div>
								<div class="large-2 columns" style="padding: .25rem;">
									&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;
									<img src="../img/plus.png" class="descriptionAddEntry" width="25" height="25" >
								</div>
							</div>
						</li>
					</ul>
				</div>
			</div>
		</li>
	</ul>


	<!-- Submit Buttons Block -->
	<div class="row">
		<div class="large-12 columns">
			<div class="row">
				<div class="large-5 large-centered columns">
					<div id="clearButton" class="large-4 columns">
						<a href="#" class="medium alert button">Clear</a>
					</div>
					<div id="resumateButton" class="large-4 columns">
						<a href="#" class="medium button">Resumate!</a>
					</div>
				</div>
			</div>
		</div>
	</div>



	<!-- jQuery -->
	<script src="../js/vendor/jquery.js"></script>
	<script src="../js/vendor/fastclick.js"></script>
	
	<script src="../js/foundation.min.js"></script>

	<script type='text/javascript' src="../js/scripts.js"></script>

	<script type="text/javascript"> 

		$(document).foundation();
		
		var blockArray = [{"type": "keyValueBlock", "size": "1"}, {"type": "lr-keyValueBlock", "size": "1"}, {"type": "descriptionBlock", "size": "1"}];




		// Add a new key-value block
		$(document).on('click', '.kvAddBlock', function(){
			var blockIndex = blockArray.length;
			blockArray[blockIndex] = {"type": "keyValueBlock", "size": "1"};

			$('#blockList').append(
				'<li class="block row keyValueBlock"><div class="large-12 columns"><div class="panel"><div style="float:right;"><img src="../img/x.png" class="closeBox" width="25" height="25" ></div><div class="large-4 columns">'
				+ '<input name="title_' + blockIndex + '" placeholder="Title" type="text" />'
				+ '</div><ul class="entryList"><li><div class="row"><div class="large-8 large-offset-2 columns"><div class="large-6 columns" >'
				+ '<input name="input_' + blockIndex + "_" + blockArray[blockIndex].size + '_0" ' + 'placeholder="Key" type="text" />'
				+ '</div><div class="large-6 columns">'
				+ '<input name="input_' + blockIndex + "_" + blockArray[blockIndex].size + '_1" ' + 'placeholder="Value" type="text" />'
				+ '</div></div><div class="large-2 columns" style="padding: .25rem;">&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;<img src="../img/plus.png" class="kvAddEntry" width="25" height="25" ></div></div></li></ul></div></div></li>'
			);
		});

		// Add a new left-right key-value block
		$(document).on('click', '.lr-kvAddBlock', function(){
			var blockIndex = blockArray.length;
			blockArray[blockIndex] = {"type": "lr-keyValueBlock", "size": "1"};
			$('#blockList').append(
				'<li class="block row lr-keyValueBlock"><div class="large-12 columns"><div class="panel"><div style="float:right;"><img src="../img/x.png" class="closeBox" width="25" height="25" ></div><div class="large-4 columns">'
				+ '<input name="title_' + blockIndex + '" placeholder="Title" type="text" />'
				+ '</div><ul class="entryList"><li><div class="row"><div class="large-8 large-offset-2 columns"><div class="large-6 columns" >'
				+ '<input name="input_' + blockIndex + "_" + blockArray[blockIndex].size + '_0" ' + 'placeholder="Key" type="text" />'
				+ '</div><div class="large-6 columns">'
				+ '<input name="input_' + blockIndex + "_" + blockArray[blockIndex].size + '_1" ' + 'placeholder="Value" type="text" />'
				+ '</div></div><div class="large-2 columns" style="padding: .25rem;">&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;<img src="../img/plus.png" class="lr-kvAddEntry" width="25" height="25" ></div></div></li></ul></div></div></li>'
			);
		});

		// Add a new description block
		$(document).on('click', '.descriptionAddBlock', function(){
			var blockIndex = blockArray.length;
			blockArray[blockIndex] = {"type": "descriptionBlock", "size": "1"};
			$('#blockList').append(
				'<li class="block row descriptionBlock"><div class="large-12 columns"><div class="panel"><div style="float:right;"><img src="../img/x.png" class="closeBox" width="25" height="25" ></div><div class="large-4 columns">'
				+ '<input name="title_' + blockIndex + '" placeholder="Title" type="text" />'
				+ '</div><ul class="entryList">'
				+'<li><div class="row">	<div class="large-8 large-offset-2 columns"><div class="large-6 columns" ><input name='
				+ '"input_' + blockIndex + "_" + blockArray[blockIndex].size + '_0" ' 
				+ 'placeholder="Subtitle" type="text" /></div><div class="large-6 columns"></div><div class="large-12 columns"><textarea rows="4" name=' 
				+ '"input_' + blockIndex + "_" + blockArray[blockIndex].size + '_1" ' 
				+ 'placeholder="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi cursus, nisi at consequat consequat, orci risus mattis dolor, sed luctus leo elit nec felis. Ut porttitor elit felis, at tincidunt arcu commodo ac. Sed dictum augue sed auctor pellentesque. Curabitur adipiscing et turpis quis mollis."></textarea></div></div><div class="large-2 columns" style="padding: .25rem;">&nbsp;&nbsp; <img src="../img/plus.png" class="descriptionAddEntry" width="25" height="25" ></div></div></li></ul></div></div></li>'

			);
		});



		// TODO
		// Add a new list block








		// Add a new key-value entry
		$(document).on('click', '.kvAddEntry', function(){
			var blockIndex = $(this).closest(".block").index();
			$(this).closest(".entryList").append('<li><div class="row"><div class="large-8 large-offset-2 columns"><div class="large-6 columns" >'
				+ '<input name="input_' + blockIndex + "_" + blockArray[blockIndex].size + '_0" '
				+ 'placeholder="Key" type="text" /></div><div class="large-6 columns">'
				+ '<input name="input_' + blockIndex + "_" + blockArray[blockIndex].size + '_1" '
				+ 'placeholder="Value" type="text" /></div></div><div class="large-2 columns" style="padding: .25rem;"><img src="../img/x.png" class="lineRemove" width="25" height="25" >&nbsp;&nbsp; <img src="../img/plus.png" class="kvAddEntry" width="25" height="25" ></div></div></li>');
			blockArray[blockIndex].size++;
			$(this).remove();
		});

		// Add a new left-right key-value entry
		$(document).on('click', '.lr-kvAddEntry', function(){
			var blockIndex = $(this).closest(".block").index();
			$(this).closest(".entryList").append('<li><div class="row"><div class="large-8 large-offset-2 columns"><div class="large-6 columns" >'
				+ '<input name="input_' + blockIndex + "_" + blockArray[blockIndex].size + '_0" '
				+ 'placeholder="Key" type="text" /></div><div class="large-6 columns">'
				+ '<input name="input_' + blockIndex + "_" + blockArray[blockIndex].size + '_1" '
				+ 'placeholder="Value" type="text" /></div></div><div class="large-2 columns" style="padding: .25rem;"><img src="../img/x.png" class="lineRemove" width="25" height="25" >&nbsp;&nbsp; <img src="../img/plus.png" class="lr-kvAddEntry" width="25" height="25" ></div></div></li>');
			blockArray[blockIndex].size++;
			$(this).remove();
		});

		// Add a new description entry
		$(document).on('click', '.descriptionAddEntry', function(){
			var blockIndex = $(this).closest(".block").index();
			$(this).closest(".entryList").append('<li><div class="row">	<div class="large-8 large-offset-2 columns"><div class="large-6 columns" >'
			+ '<input name="input_' + blockIndex + "_" + blockArray[blockIndex].size + '_0" ' 
			+ 'placeholder="Subtitle" type="text" /></div><div class="large-6 columns"></div><div class="large-12 columns">' 
			+ '<textarea rows="4" name="input_' + blockIndex + "_" + blockArray[blockIndex].size + '_1" ' 
			+ 'placeholder="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi cursus, nisi at consequat consequat, orci risus mattis dolor, sed luctus leo elit nec felis. Ut porttitor elit felis, at tincidunt arcu commodo ac. Sed dictum augue sed auctor pellentesque. Curabitur adipiscing et turpis quis mollis."></textarea></div></div><div class="large-2 columns" style="padding: .25rem;"><img src="../img/x.png" class="lineRemove" width="25" height="25" >&nbsp;&nbsp; <img src="../img/plus.png" class="descriptionAddEntry" width="25" height="25" ></div></div></li>');
			blockArray[blockIndex].size++;
			$(this).remove();
		});
		

		// TODO
		// Add a new list entry





		// Remove an entry from a block
		$(document).on('click', '.lineRemove', function(){
			var blockIndex = $(this).closest(".block").index();
			if($(this).closest('li').is(':last-child')){
				if(blockArray[blockIndex].type === 'keyValueBlock'){
					$(this).closest('li').prev().find('.large-2').append('<img src="../img/plus.png" class="kvAddEntry" width="25" height="25" >');
				}
				if(blockArray[blockIndex].type === 'lr-keyValueBlock'){
					$(this).closest('li').prev().find('.large-2').append('<img src="../img/plus.png" class="lr-kvAddEntry" width="25" height="25" >');
				}
				if(blockArray[blockIndex].type === 'descriptionBlock'){
					$(this).closest('li').prev().find('.large-2').append('<img src="../img/plus.png" class="descriptionAddEntry" width="25" height="25" >');
				}
				if(blockArray[blockIndex].type === 'listBlock'){
					$(this).closest('li').prev().find('.large-2').append('<img src="../img/plus.png" class="listAddEntry" width="25" height="25" >');
				}
			}

			blockArray[blockIndex].size--;
			$(this).closest("li").remove();
		});

		// Remove a block
		$(document).on('click', '.closeBox', function(){
			var blockIndex = $(this).closest(".block").index();
			blockArray.splice(blockIndex, 1);

			$(this).closest(".block").remove();
		});

		// Clear all input fields
		$(document).on('click', '#clearButton', function(){
			$(document).find('input:text').val('');
			$(document).find('textarea').val('');
		});



		// TODO
		// Create the resume
		$(document).on('click', '#resumateButton', function(){
			//$(document).find('input_0_0_0').val();    
			var string = "";
			for(var i in blockArray){
				string += blockArray[i].type + ": " + blockArray[i].size + ", ";
			}
			alert(string);
		});
	</script>

</body>
</html>
















